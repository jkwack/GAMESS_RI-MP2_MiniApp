FC_OFF=mpiifx

SDIR=./source/
SRC=${SDIR}/rimp2_energy_whole_KERN.f90

EXE_MKL_OFFLOAD=rimp2-mkl-offload
FFLAGS_MKL_OFFLOAD=-Ofast -i8 -fiopenmp -fopenmp-targets=spir64="-mllvm -vpo-paropt-enable-64bit-opencl-atomics=true" -cpp -DMKL_ILP64 -cpp -DINTEL -DINTEL_OFFLOAD -DCOMBINED_VERSION -DNOMPI -g -qmkl
LDFLAGS_MKL=-lmkl_sycl -lsycl 

EXES=$(EXE_MKL_OFFLOAD)

all: $(EXES)

$(EXE_MKL_OFFLOAD): $(SRC)
	$(FC_OFF)  $(FFLAGS_MKL_OFFLOAD) $^ -o $@ $(LDFLAGS_MKL)
	rm -rf *.o *.mod


.SUFFIXES:
.SUFFIXES: .c .o .f90 .cu .cpp .cuf
.PHONY: clean
clean:
	rm -rf *.o *.mod *.modmic $(EXES)
